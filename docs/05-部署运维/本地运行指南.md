# Ming 项目本地运行指南

## 当前状态

### ✅ 已完成
1. **项目构建**：构建成功，无编译错误
2. **开发服务器**：可以正常启动（`npm run dev`）
3. **依赖安装**：主要依赖已安装

### ⚠️ 待完成
1. **测试依赖**：需要安装 `jsdom`（网络问题导致安装失败）
2. **ESLint配置**：需要配置 ESLint 文件

## 快速开始

### 1. 启动开发服务器

```bash
cd srcs
npm run dev
```

开发服务器将在 `http://localhost:3000/` 启动。

### 2. 构建生产版本

```bash
cd srcs
npm run build
```

构建输出在 `srcs/dist/` 目录。

### 3. 预览生产构建

```bash
cd srcs
npm run preview
```

### 4. 运行测试（需要先安装 jsdom）

```bash
cd srcs
npm install --save-dev jsdom
npm test
```

如果网络有问题，可以尝试：
- 使用国内镜像：`npm config set registry https://registry.npmmirror.com`
- 或使用 cnpm：`cnpm install --save-dev jsdom`

### 5. 运行测试UI（需要先安装 jsdom）

```bash
cd srcs
npm run test:ui
```

## 项目结构

```
srcs/
├── src/                    # 源代码
│   ├── components/         # React组件
│   ├── pages/              # 页面组件
│   ├── services/           # 服务层
│   ├── hooks/              # React Hooks
│   ├── store/              # Redux状态管理
│   ├── types/              # TypeScript类型定义
│   └── __tests__/          # 测试文件
├── dist/                   # 构建输出
├── public/                 # 静态资源
├── package.json            # 项目配置
├── vite.config.ts          # Vite配置
└── vitest.config.ts        # 测试配置
```

## 环境要求

- Node.js >= 18.0.0
- npm >= 9.0.0

## 常用命令

| 命令 | 说明 |
|------|------|
| `npm run dev` | 启动开发服务器 |
| `npm run build` | 构建生产版本 |
| `npm run preview` | 预览生产构建 |
| `npm test` | 运行测试 |
| `npm run test:ui` | 运行测试UI |
| `npm run lint` | 代码检查 |
| `npm run format` | 代码格式化 |

## 故障排除

### 1. 测试依赖安装失败

**问题**：`npm install` 网络超时

**解决方案**：
```bash
# 使用国内镜像
npm config set registry https://registry.npmmirror.com
npm install --save-dev jsdom

# 或使用 cnpm
npm install -g cnpm --registry=https://registry.npmmirror.com
cnpm install --save-dev jsdom
```

### 2. ESLint 配置缺失

**问题**：ESLint 找不到配置文件

**解决方案**：
```bash
cd srcs
npm init @eslint/config
```

或手动创建 `.eslintrc.json` 文件。

### 3. 端口被占用

**问题**：`http://localhost:3000/` 已被占用

**解决方案**：
- 修改 `vite.config.ts` 中的端口号
- 或关闭占用端口的进程

## 下一步

1. **安装测试依赖**：解决网络问题后安装 `jsdom`
2. **配置 ESLint**：创建 ESLint 配置文件
3. **运行完整测试**：确保所有测试通过
4. **检查代码质量**：运行 lint 和 format

## 开发建议

1. **开发时**：使用 `npm run dev` 启动开发服务器，支持热重载
2. **提交前**：运行 `npm run build` 确保构建成功
3. **测试前**：运行 `npm test` 确保测试通过
4. **格式化**：使用 `npm run format` 统一代码格式

---

**最后更新**：2026-01-31
