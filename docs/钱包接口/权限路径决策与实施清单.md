# 钱包铸造权限模型与实施清单

> 基线版本：v1.0（参照 `docs/00-现行口径基线.md`）

## 1. 文档目的

本文件用于固定铸造指令（EVM: `mintConnection`；Solana: `mint_connection_nft`）的现行权限模型，确保“多类用户均可铸造”的业务需求与实现一致。

## 2. 现行决策（已冻结）

- 铸造指令（EVM: `mintConnection`；Solana: `mint_connection_nft`）：公开可调用（owner 与非 owner 均可调用）
- 治理函数 `updateConsensusHash`：保持治理权限控制（`onlyOwner`）

说明：平台治理权与用户铸造权分离，避免“仅 owner 可铸造”导致业务阻断。

## 3. 实施动作清单

### 3.1 合约与部署

- [ ] 目标链上铸造指令不含“仅治理账户可铸造”的权限限制
- [ ] 部署产物 ABI 与前端/钱包对齐
- [ ] 测试网与主网地址已记录

### 3.2 钱包实现

- [ ] owner 账户铸造路径可执行
- [ ] 非 owner 账户铸造路径可执行
- [ ] 参数不合法时返回 `INVALID_PARAMS` / `MISSING_REQUIRED_FIELD`
- [ ] 响应体保持 `payload.success/data/error` 结构

### 3.3 联调验收

- [ ] 使用 owner 账户完成一次成功铸造
- [ ] 使用非 owner 账户完成一次成功铸造
- [ ] 保留两条链上交易哈希作为验收证据
- [ ] 完成 `docs/钱包接口/钱包联调验收清单.md` 勾选

## 4. 风险与控制

- 风险：公开铸造可能引入垃圾调用与异常参数
- 控制：
  - 钱包侧强校验（地址/hash/链参数）
  - 关键操作用户确认
  - 错误最小披露
  - 速率限制或风控策略（钱包侧按产品策略可选）

## 5. 关联文档

- 技术规范：`docs/钱包接口/钱包接口技术规范.md`
- 联调命令：`docs/钱包接口/钱包联调命令清单.md`
- 验收清单：`docs/钱包接口/钱包联调验收清单.md`
- 背景决策：`docs/钱包接口/钱包NFT铸造功能需求说明书.md`
